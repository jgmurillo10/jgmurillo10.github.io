{"componentChunkName":"component---src-templates-post-jsx","path":"/es-co/blog/next-gpt-pocket-base-2-best-practices","result":{"data":{"allPrismicPost":{"edges":[{"node":{"id":"ba8823cb-0d41-5871-afb0-ed0b7a2a5c68","uid":"next-gpt-pocket-base-2-best-practices","lang":"en-us","alternate_languages":[{"lang":"es-co","document":{"url":"/es-co/blog/next-gpt-pocket-base-2-best-practices"}}],"data":{"post_author":"Juan Murillo","post_title":{"richText":[{"type":"heading1","text":"My journey building a GPT-powered assistant using Next, GPT and Pocketbase [Part 2]","spans":[]}],"text":"My journey building a GPT-powered assistant using Next, GPT and Pocketbase [Part 2]"},"post_hero_annotation":{"richText":[{"type":"heading6","text":"Ica, Per√∫","spans":[]}]},"post_hero_image":{"url":"https://images.prismic.io/juanmurillo/eae2ba6f-a54d-4f65-b7ae-efab30f9bf1f_desierto.jpeg?ixlib=gatsbyFP&auto=compress%2Cformat&fit=max&rect=0%2C224%2C768%2C576&w=1024&h=768"},"post_meta_image":{"url":"https://images.prismic.io/juanmurillo/eae2ba6f-a54d-4f65-b7ae-efab30f9bf1f_desierto.jpeg?ixlib=gatsbyFP&auto=compress%2Cformat&fit=max&rect=0%2C269%2C768%2C576&w=1024&h=768"},"post_date":"19 days ago","post_category":{"richText":[{"type":"heading5","text":"Product","spans":[]}]},"post_preview_description":{"text":"In this second post, I'll add best practices such as i18n, tests, analytics, CI/CD, etc. Also, I'll mention some lessons, technologies, references, and things that keep me humble."},"post_body":{"richText":[{"type":"heading1","text":"Next.js App best practices","spans":[]},{"type":"paragraph","text":"Disclaimer: This intends to be a series of posts describing my journey through this process. This is an academic focus, and all of the code is available on¬†GitHub. This doesn't aim to be a step-by-step tutorial. Most of the resources used to build will be shared here.","spans":[{"start":0,"end":268,"type":"em"},{"start":156,"end":162,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/jgmurillo10/notesapp","target":"_blank"}}]},{"type":"paragraph","text":"You can visit the current version here: https://notes.juanmurillo.co/en","spans":[{"start":40,"end":71,"type":"hyperlink","data":{"link_type":"Web","url":"https://notes.juanmurillo.co/en","target":"_blank"}}]},{"type":"paragraph","text":"In my previous article (Motivation), I implemented an ugly POC (Proof of Concept), and in the end, I listed a couple of things I would like to tackle. I wanted to build something using my previous experience; the focus of the current article would be adding the ‚Äúbest practices‚Äù in there.","spans":[{"start":24,"end":34,"type":"hyperlink","data":{"link_type":"Web","url":"https://juanmurillo.co/blog/next-gpt-pocket-base-1","target":"_blank"}}]},{"type":"image","url":"https://images.prismic.io/juanmurillo/8c5078e0-c991-4fa2-a59e-9c6b50d1370d_Untitled+%281%29.png?auto=compress,format","alt":"v0.1 notes","copyright":null,"dimensions":{"width":2062,"height":1074}},{"type":"paragraph","text":"The more I code, the more I get familiar with the Next framework and OpenAI. I‚Äôve looked through the docs and it‚Äôs quite impressive and smooth the way you are able to add best practices to your project. This week I focused on adding these key features to my app. You might wonder, why are these considered best practices. Let me get started.","spans":[]},{"type":"heading2","text":"What are ‚Äúbest practices‚Äù?","spans":[]},{"type":"paragraph","text":"According to Oxford‚Äôs Dictionary, a best practice is:","spans":[]},{"type":"paragraph","text":"Commercial or professional procedures that are accepted or prescribed as being correct or most effective.","spans":[{"start":0,"end":105,"type":"em"}]},{"type":"paragraph","text":"The ‚Äúbest practices‚Äù definition could be ambiguous in the software industry and it could be a little bit relative but for the sake of this side project, let‚Äôs scope that into tests, routing, internationalization, analytics, performance metrics, CI/CD, environments (dev, staging, production), among others. These best practices help us keep high quality in our digital products or services. There might be other best practices such as standardizing components, internal processes (communication between product and engineering, communication between designers and developers, etc.), and managing logs, but these will be addressed later.","spans":[]},{"type":"heading2","text":"Why are they considered best practices?","spans":[]},{"type":"paragraph","text":"In my experience, there are different reasons for considering these practices as the ‚Äúbest‚Äù. This usually depends on the type of product/service but so far I will mention which I consider critical for my current scenario one by one:","spans":[]},{"type":"list-item","text":"Tests: Mitigate errors in production, help developers identify edge cases, and tackle them before reaching real customers. Also, they allow us to mitigate regressions while implementing new changes or feature flags to avoid breaking existing behavior.","spans":[{"start":0,"end":6,"type":"strong"}]},{"type":"list-item","text":"Routing: An MVP could be easily one page. But by the time you start adding more features, you will need different pages/views to allow customers to visualize those features. In addition, most of these routes will be dynamic and created based on customer data.","spans":[{"start":0,"end":7,"type":"strong"}]},{"type":"list-item","text":"Internationalization (i18n): You might want to reach a single-language audience, but even if your target is LATAM, Brazil is a huge market that you should consider. On the other side, if your goal is North America. There are plenty of Spanish speakers in there. Also, internationalization is not limited only to the language, think about the currency. If you sell a product or service, pricing should consider the currency as well (üíµ, üí∂, üí¥).","spans":[{"start":0,"end":27,"type":"strong"}]},{"type":"list-item","text":"Analytics: You can‚Äôt improve what you can‚Äôt measure. How do you know if your copy changes or new features are being adopted? Analytics are crucial to understanding your user‚Äôs flow and their journey using your products.","spans":[{"start":0,"end":9,"type":"strong"}]},{"type":"list-item","text":"Performance metrics: Same here. You can‚Äôt improve what you can‚Äôt measure. It‚Äôs easy to use your product on your laptop, but think about how many people use it from different devices, limited networks (3G), etc.","spans":[{"start":0,"end":19,"type":"strong"}]},{"type":"list-item","text":"CI/CD: You should know if a new pull request is breaking an existing behavior, and otherwise if it‚Äôs working as expected, deliver it as soon as possible to your customers. (There‚Äôs also something called progressive rollout which is something we should consider. It basically makes releases gradually so you can mitigate possible errors).","spans":[{"start":0,"end":5,"type":"strong"}]},{"type":"list-item","text":"Environments: We don‚Äôt want to mess around with customers‚Äô data. Also, there could be PII or sensitive data that must be handled accordingly.","spans":[{"start":0,"end":12,"type":"strong"}]},{"type":"heading2","text":"How to implement them?","spans":[]},{"type":"list-item","text":"Tests: There‚Äôs something called the testing pyramid.  https://learn.cypress.io/testing-foundations/the-testing-pyramid. Jest and React Testing Library for unit tests, Cypress/Playwright for E2E tests. https://nextjs.org/docs/pages/building-your-application/optimizing/testing","spans":[{"start":0,"end":5,"type":"strong"},{"start":54,"end":118,"type":"hyperlink","data":{"link_type":"Web","url":"https://learn.cypress.io/testing-foundations/the-testing-pyramid","target":"_blank"}},{"start":201,"end":275,"type":"hyperlink","data":{"link_type":"Web","url":"https://nextjs.org/docs/pages/building-your-application/optimizing/testing"}}]},{"type":"list-item","text":"Routing: For our particular case it‚Äôs built-in using Next. https://nextjs.org/docs/pages/building-your-application/routing","spans":[{"start":0,"end":7,"type":"strong"},{"start":59,"end":122,"type":"hyperlink","data":{"link_type":"Web","url":"https://nextjs.org/docs/pages/building-your-application/routing","target":"_blank"}}]},{"type":"list-item","text":"Internationalization (i18n): It looks like there are BE-side i18n (Internationalization Routing) and FE-side i18n. There are many popular libraries to handle like¬†react-intl,¬†react-i18next,¬†lingui,¬†rosetta,¬†next-intl,¬†next-translate,¬†next-multilingual,¬†typesafe-i18n,¬†tolgee. https://nextjs.org/docs/pages/building-your-application/routing/internationalization. I haven‚Äôt figured out how to combine both yet.","spans":[{"start":0,"end":27,"type":"strong"},{"start":163,"end":173,"type":"hyperlink","data":{"link_type":"Web","url":"https://formatjs.io/docs/getting-started/installation","target":"_blank"}},{"start":175,"end":188,"type":"hyperlink","data":{"link_type":"Web","url":"https://react.i18next.com/","target":"_blank"}},{"start":190,"end":196,"type":"hyperlink","data":{"link_type":"Web","url":"https://lingui.dev/","target":"_blank"}},{"start":198,"end":205,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/lukeed/rosetta","target":"_blank"}},{"start":207,"end":216,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/amannn/next-intl","target":"_blank"}},{"start":218,"end":232,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/aralroca/next-translate","target":"_blank"}},{"start":234,"end":251,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/Avansai/next-multilingual","target":"_blank"}},{"start":253,"end":266,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/ivanhofer/typesafe-i18n","target":"_blank"}},{"start":268,"end":274,"type":"hyperlink","data":{"link_type":"Web","url":"https://tolgee.io/integrations/next","target":"_blank"}},{"start":276,"end":360,"type":"hyperlink","data":{"link_type":"Web","url":"https://nextjs.org/docs/pages/building-your-application/routing/internationalization","target":"_blank"}}]},{"type":"list-item","text":"Analytics: For our particular case, it‚Äôs built-in with Next. Google Analytics is also an option. https://vercel.com/docs/analytics","spans":[{"start":0,"end":9,"type":"strong"},{"start":97,"end":130,"type":"hyperlink","data":{"link_type":"Web","url":"https://vercel.com/docs/analytics","target":"_blank"}}]},{"type":"list-item","text":"Performance metrics: For our particular case, it‚Äôs built-in with Next. https://vercel.com/docs/speed-insights","spans":[{"start":0,"end":19,"type":"strong"},{"start":71,"end":109,"type":"hyperlink","data":{"link_type":"Web","url":"https://vercel.com/docs/speed-insights","target":"_blank"}}]},{"type":"list-item","text":"CI/CD: GitHub Actions. This also depends on where you are hosting your code. For instance, other alternatives might be Bitbucket pipelines.","spans":[{"start":0,"end":5,"type":"strong"},{"start":7,"end":21,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/features/actions","target":"_blank"}},{"start":119,"end":138,"type":"hyperlink","data":{"link_type":"Web","url":"https://bitbucket.org/product/en/features/pipelines","target":"_blank"}}]},{"type":"list-item","text":"Environments: Vercel manages different environments. https://vercel.com/docs/deployments/environments","spans":[{"start":0,"end":12,"type":"strong"},{"start":53,"end":101,"type":"hyperlink","data":{"link_type":"Web","url":"https://vercel.com/docs/deployments/environments","target":"_blank"}}]},{"type":"heading2","text":"Conclusion","spans":[]},{"type":"paragraph","text":"In conclusion, we should not limit best practices are the ones defined here. Also, best practices are not only limited to technology, there could be process-related best practices. In this particular context, we implemented best practices from a technical perspective and we took advantage of the Next.js framework because most of them were built-in. However, it's important to mention that there are other alternatives for each of the best practices mentioned here. It's just that Next, as a framework, makes our job easier.","spans":[]},{"type":"paragraph","text":"Please, feel free to let me know about other practices that you consider the best and I should have mention here.","spans":[]},{"type":"heading2","text":"Work done in the previous week","spans":[]},{"type":"image","url":"https://images.prismic.io/juanmurillo/4c6d8166-f7e2-4ca6-b41e-8de77b26deee_Screenshot+2023-09-06+at+8.15.41+AM.png?auto=compress,format","alt":"v0.2 home","copyright":null,"dimensions":{"width":2996,"height":1486}},{"type":"list-item","text":"Update cache policy in assistant's resources","spans":[]},{"type":"list-item","text":"Update styles. Tailwind rocks!","spans":[]},{"type":"list-item","text":"Add analytics","spans":[]},{"type":"list-item","text":"Add prettier","spans":[]},{"type":"list-item","text":"Add linter","spans":[]},{"type":"list-item","text":"Add husky","spans":[]},{"type":"list-item","text":"Add lint-staged","spans":[]},{"type":"list-item","text":"Setup jest","spans":[]},{"type":"list-item","text":"Add spinners","spans":[]},{"type":"list-item","text":"Add i18n and locale switcher component","spans":[]},{"type":"list-item","text":"Add redirect for default locale","spans":[]},{"type":"list-item","text":"Add dark mode","spans":[]},{"type":"heading2","text":"Lessons","spans":[]},{"type":"list-item","text":"Debugging next auth on production. https://next-auth.js.org/configuration/options#debug","spans":[{"start":35,"end":87,"type":"hyperlink","data":{"link_type":"Web","url":"https://next-auth.js.org/configuration/options#debug","target":"_blank"}}]},{"type":"list-item","text":"The cache policy is strong on the Next app. Pocketbase SDK it‚Äôs not obvious how to manage caching. However, there‚Äôs a workaround: https://github.com/pocketbase/pocketbase/discussions/2695:\nhttps://nextjs.org/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating\nhttps://nextjs.org/docs/app/building-your-application/caching","spans":[{"start":130,"end":187,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/pocketbase/pocketbase/discussions/2695","target":"_blank"}},{"start":189,"end":290,"type":"hyperlink","data":{"link_type":"Web","url":"https://nextjs.org/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating","target":"_blank"}},{"start":291,"end":352,"type":"hyperlink","data":{"link_type":"Web","url":"https://nextjs.org/docs/app/building-your-application/caching","target":"_blank"}}]},{"type":"list-item","text":"Vercel AI API is really good including the `initialMessages` property, I was able to remove some unnecessary logic. https://github.com/jgmurillo10/notesapp/commit/b3337291b60af4c9b85706f7eebfc7a6fd668b03","spans":[{"start":116,"end":203,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/jgmurillo10/notesapp/commit/b3337291b60af4c9b85706f7eebfc7a6fd668b03","target":"_blank"}}]},{"type":"list-item","text":"GPT function calling lets you describe functions and have the model intelligently choose to output a JSON object containing arguments to call those functions. Functions could execute your own logic, or use third-party libraries. For example, get the current temperature of a given location. https://openai.com/blog/function-calling-and-other-api-updates","spans":[{"start":291,"end":353,"type":"hyperlink","data":{"link_type":"Web","url":"https://openai.com/blog/function-calling-and-other-api-updates","target":"_blank"}}]},{"type":"list-item","text":"How to manage providers in Next using the App directory.","spans":[]},{"type":"list-item","text":"Vercel has built-in analytics and performance.","spans":[{"start":0,"end":6,"type":"hyperlink","data":{"link_type":"Web","url":"https://vercel.com/","target":"_blank"}}]},{"type":"list-item","text":"Vercel provides a way to measure the real performance of your app on your client‚Äôs computers. Not your fancy üçé¬†computer with more RAM than needed to run a simple App.","spans":[{"start":0,"end":6,"type":"hyperlink","data":{"link_type":"Web","url":"https://vercel.com/","target":"_blank"}}]},{"type":"list-item","text":"The dark mode is easy to implement with Tailwind.","spans":[{"start":40,"end":48,"type":"hyperlink","data":{"link_type":"Web","url":"https://tailwindcss.com/","target":"_blank"}}]},{"type":"heading2","text":"Resources","spans":[]},{"type":"list-item","text":"Implement dark mode in the Next 13 App directory: https://www.linkedin.com/pulse/implement-dark-mode-tailwindcss-nextjs13-app-5-simple-lucas-los-arcos/","spans":[{"start":50,"end":151,"type":"hyperlink","data":{"link_type":"Web","url":"https://www.linkedin.com/pulse/implement-dark-mode-tailwindcss-nextjs13-app-5-simple-lucas-los-arcos/","target":"_blank"}}]},{"type":"list-item","text":"Suppress hydration: https://legacy.reactjs.org/docs/dom-elements.html#suppresshydrationwarning","spans":[{"start":20,"end":94,"type":"hyperlink","data":{"link_type":"Web","url":"https://legacy.reactjs.org/docs/dom-elements.html#suppresshydrationwarning","target":"_blank"}}]},{"type":"list-item","text":"Prettier VS TSLint/ESLint: https://prettier.io/docs/en/comparison","spans":[{"start":27,"end":65,"type":"hyperlink","data":{"link_type":"Web","url":"https://prettier.io/docs/en/comparison","target":"_blank"}}]},{"type":"list-item","text":"GPT | Function calling: https://openai.com/blog/function-calling-and-other-api-updates","spans":[{"start":24,"end":86,"type":"hyperlink","data":{"link_type":"Web","url":"https://openai.com/blog/function-calling-and-other-api-updates","target":"_blank"}}]},{"type":"list-item","text":"GPT | Fine-tuning updates: https://openai.com/blog/gpt-3-5-turbo-fine-tuning-and-api-updates","spans":[{"start":27,"end":92,"type":"hyperlink","data":{"link_type":"Web","url":"https://openai.com/blog/gpt-3-5-turbo-fine-tuning-and-api-updates","target":"_blank"}}]},{"type":"list-item","text":"Web Analytics: https://vercel.com/docs/analytics","spans":[{"start":15,"end":48,"type":"hyperlink","data":{"link_type":"Web","url":"https://vercel.com/docs/analytics","target":"_blank"}}]},{"type":"list-item","text":"Speed Insights: https://vercel.com/docs/speed-insights","spans":[{"start":16,"end":54,"type":"hyperlink","data":{"link_type":"Web","url":"https://vercel.com/docs/speed-insights","target":"_blank"}}]},{"type":"list-item","text":"GitHub actions: https://github.com/features/actions","spans":[{"start":16,"end":51,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/features/actions","target":"_blank"}}]},{"type":"list-item","text":"Next cache: \nhttps://nextjs.org/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating\nhttps://nextjs.org/docs/app/building-your-application/caching","spans":[{"start":13,"end":114,"type":"hyperlink","data":{"link_type":"Web","url":"https://nextjs.org/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating","target":"_blank"}},{"start":115,"end":176,"type":"hyperlink","data":{"link_type":"Web","url":"https://nextjs.org/docs/app/building-your-application/caching","target":"_blank"}}]},{"type":"list-item","text":"E2E or Component tests using Cypress: https://docs.cypress.io/guides/core-concepts/testing-types","spans":[{"start":38,"end":96,"type":"hyperlink","data":{"link_type":"Web","url":"https://docs.cypress.io/guides/core-concepts/testing-types","target":"_blank"}}]},{"type":"list-item","text":"TailwindUI: https://tailwindui.com/","spans":[{"start":12,"end":35,"type":"hyperlink","data":{"link_type":"Web","url":"https://tailwindui.com/","target":"_blank"}}]},{"type":"heading2","text":"Things that keep me humble","spans":[]},{"type":"list-item","text":"Finding out that auth errors were due to missing ENV variables on production.","spans":[]},{"type":"list-item","text":"Added support for jest but there‚Äôs only one dummy test written in the whole app.","spans":[]},{"type":"heading2","text":"Other best practices worth mentioning","spans":[]},{"type":"paragraph","text":"(I might write about them in the short term)","spans":[]},{"type":"list-item","text":"Optimize Core Web Vitals: https://web.dev/i18n/es/vitals/","spans":[{"start":26,"end":57,"type":"hyperlink","data":{"link_type":"Web","url":"https://web.dev/i18n/es/vitals/","target":"_blank"}}]},{"type":"list-item","text":"Optimize Bundle Size","spans":[]},{"type":"list-item","text":"Feature flags managing","spans":[]},{"type":"list-item","text":"Use Dependabot to Update Packages: https://github.com/dependabot","spans":[{"start":35,"end":64,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/dependabot","target":"_blank"}}]},{"type":"list-item","text":"Storybook: https://storybook.js.org/","spans":[{"start":11,"end":36,"type":"hyperlink","data":{"link_type":"Web","url":"https://storybook.js.org/","target":"_blank"}}]},{"type":"list-item","text":"Depcheck: https://www.npmjs.com/package/depcheck","spans":[{"start":10,"end":48,"type":"hyperlink","data":{"link_type":"Web","url":"https://www.npmjs.com/package/depcheck","target":"_blank"}}]},{"type":"list-item","text":"Mono-repo structure where your component library resides with your Next.js application: https://blog.logrocket.com/build-monorepo-next-js/","spans":[{"start":88,"end":138,"type":"hyperlink","data":{"link_type":"Web","url":"https://blog.logrocket.com/build-monorepo-next-js/","target":"_blank"}}]},{"type":"list-item","text":"Maintain large NextJS App blogpost: https://www.smashingmagazine.com/2021/11/maintain-large-nextjs-application/","spans":[{"start":36,"end":111,"type":"hyperlink","data":{"link_type":"Web","url":"https://www.smashingmagazine.com/2021/11/maintain-large-nextjs-application/","target":"_blank"}}]}],"text":"Next.js App best practices Disclaimer: This intends to be a series of posts describing my journey through this process. This is an academic focus, and all of the code is available on¬†GitHub. This doesn't aim to be a step-by-step tutorial. Most of the resources used to build will be shared here. You can visit the current version here: https://notes.juanmurillo.co/en In my previous article (Motivation), I implemented an ugly POC (Proof of Concept), and in the end, I listed a couple of things I would like to tackle. I wanted to build something using my previous experience; the focus of the current article would be adding the ‚Äúbest practices‚Äù in there. The more I code, the more I get familiar with the Next framework and OpenAI. I‚Äôve looked through the docs and it‚Äôs quite impressive and smooth the way you are able to add best practices to your project. This week I focused on adding these key features to my app. You might wonder, why are these considered best practices. Let me get started. What are ‚Äúbest practices‚Äù? According to Oxford‚Äôs Dictionary, a best practice is: Commercial or professional procedures that are accepted or prescribed as being correct or most effective. The ‚Äúbest practices‚Äù definition could be ambiguous in the software industry and it could be a little bit relative but for the sake of this side project, let‚Äôs scope that into tests, routing, internationalization, analytics, performance metrics, CI/CD, environments (dev, staging, production), among others. These best practices help us keep high quality in our digital products or services. There might be other best practices such as standardizing components, internal processes (communication between product and engineering, communication between designers and developers, etc.), and managing logs, but these will be addressed later. Why are they considered best practices? In my experience, there are different reasons for considering these practices as the ‚Äúbest‚Äù. This usually depends on the type of product/service but so far I will mention which I consider critical for my current scenario one by one: Tests: Mitigate errors in production, help developers identify edge cases, and tackle them before reaching real customers. Also, they allow us to mitigate regressions while implementing new changes or feature flags to avoid breaking existing behavior. Routing: An MVP could be easily one page. But by the time you start adding more features, you will need different pages/views to allow customers to visualize those features. In addition, most of these routes will be dynamic and created based on customer data. Internationalization (i18n): You might want to reach a single-language audience, but even if your target is LATAM, Brazil is a huge market that you should consider. On the other side, if your goal is North America. There are plenty of Spanish speakers in there. Also, internationalization is not limited only to the language, think about the currency. If you sell a product or service, pricing should consider the currency as well (üíµ, üí∂, üí¥). Analytics: You can‚Äôt improve what you can‚Äôt measure. How do you know if your copy changes or new features are being adopted? Analytics are crucial to understanding your user‚Äôs flow and their journey using your products. Performance metrics: Same here. You can‚Äôt improve what you can‚Äôt measure. It‚Äôs easy to use your product on your laptop, but think about how many people use it from different devices, limited networks (3G), etc. CI/CD: You should know if a new pull request is breaking an existing behavior, and otherwise if it‚Äôs working as expected, deliver it as soon as possible to your customers. (There‚Äôs also something called progressive rollout which is something we should consider. It basically makes releases gradually so you can mitigate possible errors). Environments: We don‚Äôt want to mess around with customers‚Äô data. Also, there could be PII or sensitive data that must be handled accordingly. How to implement them? Tests: There‚Äôs something called the testing pyramid.  https://learn.cypress.io/testing-foundations/the-testing-pyramid. Jest and React Testing Library for unit tests, Cypress/Playwright for E2E tests. https://nextjs.org/docs/pages/building-your-application/optimizing/testing Routing: For our particular case it‚Äôs built-in using Next. https://nextjs.org/docs/pages/building-your-application/routing Internationalization (i18n): It looks like there are BE-side i18n (Internationalization Routing) and FE-side i18n. There are many popular libraries to handle like¬†react-intl,¬†react-i18next,¬†lingui,¬†rosetta,¬†next-intl,¬†next-translate,¬†next-multilingual,¬†typesafe-i18n,¬†tolgee. https://nextjs.org/docs/pages/building-your-application/routing/internationalization. I haven‚Äôt figured out how to combine both yet. Analytics: For our particular case, it‚Äôs built-in with Next. Google Analytics is also an option. https://vercel.com/docs/analytics Performance metrics: For our particular case, it‚Äôs built-in with Next. https://vercel.com/docs/speed-insights CI/CD: GitHub Actions. This also depends on where you are hosting your code. For instance, other alternatives might be Bitbucket pipelines. Environments: Vercel manages different environments. https://vercel.com/docs/deployments/environments Conclusion In conclusion, we should not limit best practices are the ones defined here. Also, best practices are not only limited to technology, there could be process-related best practices. In this particular context, we implemented best practices from a technical perspective and we took advantage of the Next.js framework because most of them were built-in. However, it's important to mention that there are other alternatives for each of the best practices mentioned here. It's just that Next, as a framework, makes our job easier. Please, feel free to let me know about other practices that you consider the best and I should have mention here. Work done in the previous week Update cache policy in assistant's resources Update styles. Tailwind rocks! Add analytics Add prettier Add linter Add husky Add lint-staged Setup jest Add spinners Add i18n and locale switcher component Add redirect for default locale Add dark mode Lessons Debugging next auth on production. https://next-auth.js.org/configuration/options#debug The cache policy is strong on the Next app. Pocketbase SDK it‚Äôs not obvious how to manage caching. However, there‚Äôs a workaround: https://github.com/pocketbase/pocketbase/discussions/2695:\nhttps://nextjs.org/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating\nhttps://nextjs.org/docs/app/building-your-application/caching Vercel AI API is really good including the `initialMessages` property, I was able to remove some unnecessary logic. https://github.com/jgmurillo10/notesapp/commit/b3337291b60af4c9b85706f7eebfc7a6fd668b03 GPT function calling lets you describe functions and have the model intelligently choose to output a JSON object containing arguments to call those functions. Functions could execute your own logic, or use third-party libraries. For example, get the current temperature of a given location. https://openai.com/blog/function-calling-and-other-api-updates How to manage providers in Next using the App directory. Vercel has built-in analytics and performance. Vercel provides a way to measure the real performance of your app on your client‚Äôs computers. Not your fancy üçé¬†computer with more RAM than needed to run a simple App. The dark mode is easy to implement with Tailwind. Resources Implement dark mode in the Next 13 App directory: https://www.linkedin.com/pulse/implement-dark-mode-tailwindcss-nextjs13-app-5-simple-lucas-los-arcos/ Suppress hydration: https://legacy.reactjs.org/docs/dom-elements.html#suppresshydrationwarning Prettier VS TSLint/ESLint: https://prettier.io/docs/en/comparison GPT | Function calling: https://openai.com/blog/function-calling-and-other-api-updates GPT | Fine-tuning updates: https://openai.com/blog/gpt-3-5-turbo-fine-tuning-and-api-updates Web Analytics: https://vercel.com/docs/analytics Speed Insights: https://vercel.com/docs/speed-insights GitHub actions: https://github.com/features/actions Next cache: \nhttps://nextjs.org/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating\nhttps://nextjs.org/docs/app/building-your-application/caching E2E or Component tests using Cypress: https://docs.cypress.io/guides/core-concepts/testing-types TailwindUI: https://tailwindui.com/ Things that keep me humble Finding out that auth errors were due to missing ENV variables on production. Added support for jest but there‚Äôs only one dummy test written in the whole app. Other best practices worth mentioning (I might write about them in the short term) Optimize Core Web Vitals: https://web.dev/i18n/es/vitals/ Optimize Bundle Size Feature flags managing Use Dependabot to Update Packages: https://github.com/dependabot Storybook: https://storybook.js.org/ Depcheck: https://www.npmjs.com/package/depcheck Mono-repo structure where your component library resides with your Next.js application: https://blog.logrocket.com/build-monorepo-next-js/ Maintain large NextJS App blogpost: https://www.smashingmagazine.com/2021/11/maintain-large-nextjs-application/"}}}},{"node":{"id":"a319e126-1a71-5e20-a4d7-4ede92382956","uid":"next-gpt-pocket-base-2-best-practices","lang":"es-co","alternate_languages":[{"lang":"en-us","document":{"url":"/blog/next-gpt-pocket-base-2-best-practices"}}],"data":{"post_author":"Juan Murillo","post_title":{"richText":[{"type":"heading1","text":"Mi experiencia construyendo un asistente impulsado por GPT usando Next, GPT y Pocketbase [Parte 2]","spans":[]}],"text":"Mi experiencia construyendo un asistente impulsado por GPT usando Next, GPT y Pocketbase [Parte 2]"},"post_hero_annotation":{"richText":[{"type":"heading6","text":"Ica, Per√∫","spans":[]}]},"post_hero_image":{"url":"https://images.prismic.io/juanmurillo/eae2ba6f-a54d-4f65-b7ae-efab30f9bf1f_desierto.jpeg?ixlib=gatsbyFP&auto=compress%2Cformat&fit=max&rect=0%2C224%2C768%2C576&w=1024&h=768"},"post_meta_image":{"url":"https://images.prismic.io/juanmurillo/eae2ba6f-a54d-4f65-b7ae-efab30f9bf1f_desierto.jpeg?ixlib=gatsbyFP&auto=compress%2Cformat&fit=max&rect=0%2C269%2C768%2C576&w=1024&h=768"},"post_date":"19 days ago","post_category":{"richText":[{"type":"heading5","text":"Product","spans":[]}]},"post_preview_description":{"text":"En este segundo art√≠culo, agregar√© las mejores pr√°cticas al proyecto como: internacionalizaci√≥n (i18n), pruebas, anal√≠tica, integraci√≥n continua y despliegue continuo (CI/CD), etc. Adicionalmente, mencionar√© algunas lecciones, tecnolog√≠as, referencias y cosas que me mantienen humilde."},"post_body":{"richText":[{"type":"heading1","text":"Mejores pr√°cticas en aplicaci√≥n Next.js ","spans":[]},{"type":"paragraph","text":"Disclaimer: Esta pretende ser una serie de publicaciones que describan mi experiencia a trav√©s de este proceso. Esta serie se enfoca en lo acad√©mico y todo el c√≥digo est√° disponible en GitHub. No pretendo que sea un tutorial paso a paso. La mayor√≠a de los recursos utilizados ser√°n compartidos al final de cada publicaci√≥n. ","spans":[{"start":0,"end":324,"type":"em"},{"start":185,"end":191,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/jgmurillo10/notesapp","target":"_blank"}}]},{"type":"paragraph","text":"Puedes visitar la versi√≥n m√°s reciente aqu√≠: https://notes.juanmurillo.co/es","spans":[{"start":45,"end":76,"type":"hyperlink","data":{"link_type":"Web","url":"https://notes.juanmurillo.co/es","target":"_blank"}}]},{"type":"paragraph","text":"En mi art√≠culo anterior (Motivaci√≥n), implement√© una Prueba de Concepto muy b√°sica (Proof of Concept) y al final del art√≠culo, mencion√© un par de cosas que me gustar√≠a implementar. Quiero construir algo usando mi experiencia previa y en este art√≠culo me enfocar√© en las \"mejores pr√°cticas\".","spans":[{"start":25,"end":35,"type":"hyperlink","data":{"link_type":"Web","url":"https://juanmurillo.co/es-co/blog/next-gpt-pocket-base-1","target":"_blank"}}]},{"type":"image","url":"https://images.prismic.io/juanmurillo/8c5078e0-c991-4fa2-a59e-9c6b50d1370d_Untitled+%281%29.png?auto=compress,format","alt":"v0.1 notes","copyright":null,"dimensions":{"width":2062,"height":1074}},{"type":"paragraph","text":"Entre m√°s programo, m√°s me familiarizo con Next y OpenAI. He revisado la documentaci√≥n y es impresionante la forma tan sencilla de agregar mejores pr√°cticas a tu proyecto. Esta semana me enfoqu√© en agregar estas funcionalidades a mi aplicaci√≥n. Ustedes se estar√°n preguntando, ¬øqu√© son y por qu√© son consideradas como \"mejores pr√°cticas\"? D√©jenme ponerlo en espa√±ol.","spans":[]},{"type":"heading2","text":"¬øQu√© son las \"mejores pr√°cticas\"?","spans":[]},{"type":"paragraph","text":"Seg√∫n el diccionario de Oxford, una buena pr√°ctica es:","spans":[]},{"type":"paragraph","text":"Procedimientos comerciales o profesionales que son aceptados o prescritos por ser los m√°s correctos o efectivos.","spans":[{"start":0,"end":112,"type":"em"}]},{"type":"paragraph","text":"Esta definici√≥n de \"mejores pr√°cticas\" puede ser ambigua en la industria del software y tambi√©n un poco relativa. Para este contexto en particular, que es una aplicaci√≥n web, vamos a reducir el alcance a pruebas, rutas, internacionalizaci√≥n (i18n), anal√≠tica, m√©tricas de desempe√±o, integraci√≥n continua y despliegue continuo (CI/CD), ambientes de desarrollo (desarrollo, prueba, producci√≥n), entre otros. Estas mejores pr√°cticas nos ayudan a mantener altos est√°ndares de calidad en nuestros productos o servicios digitales. Puede que haya muchas m√°s pr√°cticas consideradas como mejores. Por ejemplo, estandarizaci√≥n de componentes (creando o utilizando librer√≠as de componentes), procesos internos (comunicaci√≥n entre producto y dise√±o con el equipo de ingenier√≠a), manejo de registros (logs), pero estas ser√°n revisadas m√°s adelante.","spans":[]},{"type":"heading2","text":"¬øPor qu√© son consideradas como mejores pr√°cticas?","spans":[]},{"type":"paragraph","text":"En mi experiencia, pueden haber diversas razones para considerar estas pr√°cticas como las \"mejores\". Esto usualmente depende del tipo de producto o servicio, pero por ahora mencionar√© las que considero cr√≠ticas para el contexto actual:","spans":[]},{"type":"list-item","text":"Pruebas: Mitigan los errores en producci√≥n, ayudan a los desarrolladores a identificar casos de borde (edge cases) y permiten que sean solucionados antes de ser consumidos por los usuarios. Adicionalmente, nos permiten mitigar las regresiones validando que el comportamiento existente se mantenga cuando estamos implementando nuevos cambios, agregando funcionalidades, o implementando feature flags.","spans":[{"start":0,"end":9,"type":"strong"}]},{"type":"list-item","text":"Routing: Un MVP (Minimum Viable Product - Producto M√≠nimo Viable) puede ser f√°cilmente una p√°gina. Sin embargo, a medida que se van agregando m√°s funcionalidades, empiezas a requerir diferentes p√°ginas o vistas para permitir que los usuarios naveguen por esas funcionalidades. Adicionalmente, muchas de las rutas ser√°n din√°micas y creadas con base en informaci√≥n del usuario.","spans":[{"start":0,"end":7,"type":"strong"}]},{"type":"list-item","text":"Internacionalizaci√≥n (i18n): Puede que le est√©s apuntando a una audiencia con un idioma particular, pero incluso si tu objetivo es LATAM, Brasil es un mercado que debes considerar. Por otro lado, si tu p√∫blico objetivo es Norteam√©rica, hay una cantidad considerable de hispanohablantes. Adem√°s, la internacionalizaci√≥n no se limita √∫nicamente al lenguaje, piensa en las divisas. Si vendes un producto o servicio, los precios deber√≠an estar alineados con la divisa de cada pa√≠s desde donde te visitan (üíµ, üí∂, üí¥).","spans":[{"start":0,"end":27,"type":"strong"}]},{"type":"list-item","text":"Anal√≠tica: No puedes mejorar lo que no puedes medir. ¬øC√≥mo sabes si tus cambios o nuevas funcionalidades est√°n siendo adoptadas? Los datos de anal√≠tica son cruciales para entender el flujo de tus usuarios y su experiencia usando tus productos.","spans":[{"start":0,"end":9,"type":"strong"}]},{"type":"list-item","text":"M√©tricas de desempe√±o: Igualmente, no puedes mejorar lo que no puedes medir. Es muy f√°cil usar tu producto en tu computadora personal, pero piensa en cu√°ntas personas lo usar√°n desde diferentes dispositivos, con redes limitadas (3G), entre otros.","spans":[{"start":0,"end":21,"type":"strong"}]},{"type":"list-item","text":"CI/CD: Debes saber si un nuevo Pull Request est√° afectando el comportamiento esperado. De lo contrario, si no lo hace, deber√≠a entregarse valor al cliente lo antes posible.(Existe algo llamado \"progressive rollout\" que tambi√©n debes considerar. B√°sicamente, es hacer p√∫blico un cambio o funcionalidad progresivamente para as√≠ mitigar errores).","spans":[{"start":0,"end":5,"type":"strong"}]},{"type":"list-item","text":"Ambientes de desarrollo: No queremos exponer la informaci√≥n de nuestros clientes. Adicionalmente, puede haber informaci√≥n sensible que debe ser manejada profesionalmente.","spans":[{"start":0,"end":23,"type":"strong"}]},{"type":"heading2","text":"¬øC√≥mo implementarlas?","spans":[]},{"type":"list-item","text":"Pruebas: Hay algo llamado la pir√°mide de pruebas.  https://learn.cypress.io/testing-foundations/the-testing-pyramid. Jest y React Testing Library para pruebas unitarias, Cypress/Playwright para pruebas de punto a punto (End-to-End, E2E). https://nextjs.org/docs/pages/building-your-application/optimizing/testing","spans":[{"start":0,"end":7,"type":"strong"},{"start":51,"end":115,"type":"hyperlink","data":{"link_type":"Web","url":"https://learn.cypress.io/testing-foundations/the-testing-pyramid","target":"_blank"}},{"start":238,"end":312,"type":"hyperlink","data":{"link_type":"Web","url":"https://nextjs.org/docs/pages/building-your-application/optimizing/testing"}}]},{"type":"list-item","text":"Routing: Para nuestro caso particular est√° integrado usando Next. https://nextjs.org/docs/pages/building-your-application/routing","spans":[{"start":0,"end":7,"type":"strong"},{"start":66,"end":129,"type":"hyperlink","data":{"link_type":"Web","url":"https://nextjs.org/docs/pages/building-your-application/routing","target":"_blank"}}]},{"type":"list-item","text":"Internacionalizaci√≥n (i18n): Parece ser que hay i18n del lado del servidor (Internationalization Routing) y del lado del cliente. Existen muchas librer√≠as populares para manejar i18n del lado del cliente:¬†react-intl,¬†react-i18next,¬†lingui,¬†rosetta,¬†next-intl,¬†next-translate,¬†next-multilingual,¬†typesafe-i18n,¬†tolgee. https://nextjs.org/docs/pages/building-your-application/routing/internationalization. Del lado del servidor Next hace muy bien su trabajo. Sin embargo, a√∫n no he descubierto como se deber√≠an integrar ambas, estoy mucho m√°s familiarizado con i18n del lado del cliente.","spans":[{"start":0,"end":27,"type":"strong"},{"start":205,"end":215,"type":"hyperlink","data":{"link_type":"Web","url":"https://formatjs.io/docs/getting-started/installation","target":"_blank"}},{"start":217,"end":230,"type":"hyperlink","data":{"link_type":"Web","url":"https://react.i18next.com/","target":"_blank"}},{"start":232,"end":238,"type":"hyperlink","data":{"link_type":"Web","url":"https://lingui.dev/","target":"_blank"}},{"start":240,"end":247,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/lukeed/rosetta","target":"_blank"}},{"start":249,"end":258,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/amannn/next-intl","target":"_blank"}},{"start":260,"end":274,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/aralroca/next-translate","target":"_blank"}},{"start":276,"end":293,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/Avansai/next-multilingual","target":"_blank"}},{"start":295,"end":308,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/ivanhofer/typesafe-i18n","target":"_blank"}},{"start":310,"end":316,"type":"hyperlink","data":{"link_type":"Web","url":"https://tolgee.io/integrations/next","target":"_blank"}},{"start":318,"end":402,"type":"hyperlink","data":{"link_type":"Web","url":"https://nextjs.org/docs/pages/building-your-application/routing/internationalization","target":"_blank"}}]},{"type":"list-item","text":"Anal√≠tica: Para nuestro caso particular, viene con Next. Google Analytics tambi√©n puede llegar a ser una opci√≥n. https://vercel.com/docs/analytics","spans":[{"start":0,"end":9,"type":"strong"},{"start":113,"end":146,"type":"hyperlink","data":{"link_type":"Web","url":"https://vercel.com/docs/analytics","target":"_blank"}}]},{"type":"list-item","text":"M√©tricas de desempe√±o: Para nuestro caso particular, viene con Next. https://vercel.com/docs/speed-insights","spans":[{"start":0,"end":21,"type":"strong"},{"start":69,"end":107,"type":"hyperlink","data":{"link_type":"Web","url":"https://vercel.com/docs/speed-insights","target":"_blank"}}]},{"type":"list-item","text":"CI/CD: GitHub Actions. Esto tambi√©n depende de d√≥nde est√° tu c√≥digo. Por ejemplo, otras alternativas pueden ser Bitbucket pipelines.","spans":[{"start":0,"end":5,"type":"strong"},{"start":7,"end":21,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/features/actions","target":"_blank"}},{"start":112,"end":131,"type":"hyperlink","data":{"link_type":"Web","url":"https://bitbucket.org/product/en/features/pipelines","target":"_blank"}}]},{"type":"list-item","text":"Ambientes de desarrollo: Vercel maneja diferentes ambientes. https://vercel.com/docs/deployments/environments","spans":[{"start":0,"end":23,"type":"strong"},{"start":61,"end":109,"type":"hyperlink","data":{"link_type":"Web","url":"https://vercel.com/docs/deployments/environments","target":"_blank"}}]},{"type":"heading2","text":"Conclusi√≥n","spans":[]},{"type":"paragraph","text":"En conclusi√≥n, no deber√≠amos limitarnos √∫nicamente a las mejores pr√°cticas mencionadas aqu√≠. Adem√°s, las mejores pr√°cticas no se limitan solo a la tecnolog√≠a, tambi√©n existen mejores pr√°cticas relacionadas con los procesos. En este contexto particular, hemos implementado las mejores pr√°cticas desde un punto de vista t√©cnico, y hemos aprovechado Next.js como framework, ya que muchas de estas pr√°cticas vienen casi por defecto. Sin embargo, es importante mencionar que all√≠ afuera existen muchas alternativas disponibles para cada una de las mejores pr√°cticas mencionadas aqu√≠. Simplemente, Next.js, como framework, facilita nuestra vida.","spans":[]},{"type":"paragraph","text":"Por favor, d√©jame saber qu√© otras pr√°cticas consideras que se me escaparon y deb√≠ mencionar aqu√≠.","spans":[]},{"type":"heading2","text":"Trabajo hecho en la √∫ltima semana","spans":[]},{"type":"image","url":"https://images.prismic.io/juanmurillo/4c6d8166-f7e2-4ca6-b41e-8de77b26deee_Screenshot+2023-09-06+at+8.15.41+AM.png?auto=compress,format","alt":"v0.2 home","copyright":null,"dimensions":{"width":2996,"height":1486}},{"type":"list-item","text":"Actualizar la pol√≠tica de cache en los recursos de asistentes","spans":[]},{"type":"list-item","text":"Actualizar los estilos. Tailwind es genial!","spans":[]},{"type":"list-item","text":"Agregar analytics","spans":[]},{"type":"list-item","text":"Agregar prettier","spans":[]},{"type":"list-item","text":"Agregar linter","spans":[]},{"type":"list-item","text":"Agregar husky","spans":[]},{"type":"list-item","text":"Agregar lint-staged","spans":[]},{"type":"list-item","text":"Configurar jest","spans":[]},{"type":"list-item","text":"Agregar spinners","spans":[]},{"type":"list-item","text":"Agregar soporte para i18n y un componente para cambiar de idioma","spans":[]},{"type":"list-item","text":"Agregar redirect para locale por defecto (en - English - Ingl√©s)","spans":[]},{"type":"list-item","text":"Agregar modo oscuro (dark mode)","spans":[]},{"type":"heading2","text":"Lecciones","spans":[]},{"type":"list-item","text":"Debugging next auth en producci√≥n. https://next-auth.js.org/configuration/options#debug","spans":[{"start":35,"end":87,"type":"hyperlink","data":{"link_type":"Web","url":"https://next-auth.js.org/configuration/options#debug","target":"_blank"}}]},{"type":"list-item","text":"La pol√≠tica de cache es fuerte por defecto en las aplicaciones Next. Pocketbase SDK no es obvio como manejar el cache con el SDK pero hay un \"hack\" o \"workaround\": https://github.com/pocketbase/pocketbase/discussions/2695:\nhttps://nextjs.org/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating\nhttps://nextjs.org/docs/app/building-your-application/caching","spans":[{"start":164,"end":221,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/pocketbase/pocketbase/discussions/2695","target":"_blank"}},{"start":223,"end":324,"type":"hyperlink","data":{"link_type":"Web","url":"https://nextjs.org/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating","target":"_blank"}},{"start":325,"end":386,"type":"hyperlink","data":{"link_type":"Web","url":"https://nextjs.org/docs/app/building-your-application/caching","target":"_blank"}}]},{"type":"list-item","text":"Vercel AI API es demasiado buena para integrar AI en tu aplicaci√≥n. Adicional incluir el atributo `initialMessages` es maravilloso, pude eliminar l√≥gica innecesaria: https://github.com/jgmurillo10/notesapp/commit/b3337291b60af4c9b85706f7eebfc7a6fd668b03","spans":[{"start":166,"end":253,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/jgmurillo10/notesapp/commit/b3337291b60af4c9b85706f7eebfc7a6fd668b03","target":"_blank"}}]},{"type":"list-item","text":"GPT function calling te permite describir funciones y dejar que el modelo decida retornar un objeto JSON conteniendo los argumentos para esas funciones. En estas funciones puedes ejecutar tu propia l√≥gica o usar librer√≠as externas. Por ejemplo, obtener la temperatura en tiempo real dada una ubicaci√≥n. https://openai.com/blog/function-calling-and-other-api-updates","spans":[{"start":303,"end":365,"type":"hyperlink","data":{"link_type":"Web","url":"https://openai.com/blog/function-calling-and-other-api-updates","target":"_blank"}}]},{"type":"list-item","text":"El manejo de \"providers\" en una aplicaci√≥n de Next que utiliza el \"App directory\".","spans":[]},{"type":"list-item","text":"Vercel viene con analytics y performance.","spans":[{"start":0,"end":6,"type":"hyperlink","data":{"link_type":"Web","url":"https://vercel.com/","target":"_blank"}}]},{"type":"list-item","text":"Vercel provee una forma de medir el desempe√±o real de tu aplicaci√≥n en los computadores de tus usuarios. No en tu fancy üçé¬†computador con m√°s RAM de la necesaria.","spans":[{"start":0,"end":6,"type":"hyperlink","data":{"link_type":"Web","url":"https://vercel.com/","target":"_blank"}}]},{"type":"list-item","text":"El modo oscuro (dark mode) es muy f√°cil de implementar con Tailwind.","spans":[{"start":59,"end":67,"type":"hyperlink","data":{"link_type":"Web","url":"https://tailwindcss.com/","target":"_blank"}}]},{"type":"heading2","text":"Recursos","spans":[]},{"type":"list-item","text":"Implementar dark mode en Next 13 App directory (Implement dark mode in the Next 13 App directory): https://www.linkedin.com/pulse/implement-dark-mode-tailwindcss-nextjs13-app-5-simple-lucas-los-arcos/","spans":[{"start":99,"end":200,"type":"hyperlink","data":{"link_type":"Web","url":"https://www.linkedin.com/pulse/implement-dark-mode-tailwindcss-nextjs13-app-5-simple-lucas-los-arcos/","target":"_blank"}}]},{"type":"list-item","text":"Suppress hydration: https://legacy.reactjs.org/docs/dom-elements.html#suppresshydrationwarning","spans":[{"start":20,"end":94,"type":"hyperlink","data":{"link_type":"Web","url":"https://legacy.reactjs.org/docs/dom-elements.html#suppresshydrationwarning","target":"_blank"}}]},{"type":"list-item","text":"Prettier VS TSLint/ESLint: https://prettier.io/docs/en/comparison","spans":[{"start":27,"end":65,"type":"hyperlink","data":{"link_type":"Web","url":"https://prettier.io/docs/en/comparison","target":"_blank"}}]},{"type":"list-item","text":"GPT | Function calling: https://openai.com/blog/function-calling-and-other-api-updates","spans":[{"start":24,"end":86,"type":"hyperlink","data":{"link_type":"Web","url":"https://openai.com/blog/function-calling-and-other-api-updates","target":"_blank"}}]},{"type":"list-item","text":"GPT | Fine-tuning updates: https://openai.com/blog/gpt-3-5-turbo-fine-tuning-and-api-updates","spans":[{"start":27,"end":92,"type":"hyperlink","data":{"link_type":"Web","url":"https://openai.com/blog/gpt-3-5-turbo-fine-tuning-and-api-updates","target":"_blank"}}]},{"type":"list-item","text":"Web Analytics: https://vercel.com/docs/analytics","spans":[{"start":15,"end":48,"type":"hyperlink","data":{"link_type":"Web","url":"https://vercel.com/docs/analytics","target":"_blank"}}]},{"type":"list-item","text":"Speed Insights: https://vercel.com/docs/speed-insights","spans":[{"start":16,"end":54,"type":"hyperlink","data":{"link_type":"Web","url":"https://vercel.com/docs/speed-insights","target":"_blank"}}]},{"type":"list-item","text":"GitHub actions: https://github.com/features/actions","spans":[{"start":16,"end":51,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/features/actions","target":"_blank"}}]},{"type":"list-item","text":"Next cache: \nhttps://nextjs.org/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating\nhttps://nextjs.org/docs/app/building-your-application/caching","spans":[{"start":13,"end":114,"type":"hyperlink","data":{"link_type":"Web","url":"https://nextjs.org/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating","target":"_blank"}},{"start":115,"end":176,"type":"hyperlink","data":{"link_type":"Web","url":"https://nextjs.org/docs/app/building-your-application/caching","target":"_blank"}}]},{"type":"list-item","text":"E2E or Component tests using Cypress: https://docs.cypress.io/guides/core-concepts/testing-types","spans":[{"start":38,"end":96,"type":"hyperlink","data":{"link_type":"Web","url":"https://docs.cypress.io/guides/core-concepts/testing-types","target":"_blank"}}]},{"type":"list-item","text":"TailwindUI: https://tailwindui.com/","spans":[{"start":12,"end":35,"type":"hyperlink","data":{"link_type":"Web","url":"https://tailwindui.com/","target":"_blank"}}]},{"type":"heading2","text":"Cosas que me mantienen humilde","spans":[]},{"type":"list-item","text":"Darme cuenta de que los errores de next auth eran realmente porque faltaban variables de entorno en producci√≥n. (face-palm)","spans":[]},{"type":"list-item","text":"Agregar soporte para jest pero crear solamente un dummy test en toda la aplicaci√≥n.","spans":[]},{"type":"heading2","text":"Otras mejores pr√°cticas que vale la pena mencionar","spans":[]},{"type":"paragraph","text":"(Quiz√°s escriba acerca de ellas m√°s adelante)","spans":[]},{"type":"list-item","text":"Optimizar Core Web Vitals: https://web.dev/i18n/es/vitals/","spans":[{"start":27,"end":58,"type":"hyperlink","data":{"link_type":"Web","url":"https://web.dev/i18n/es/vitals/","target":"_blank"}}]},{"type":"list-item","text":"Optimizar el \"Bundle Size\"","spans":[]},{"type":"list-item","text":"Implementaci√≥n y manejo de Feature flags","spans":[]},{"type":"list-item","text":"Usar Dependabot para mantener los paquetes actualizados: https://github.com/dependabot","spans":[{"start":57,"end":86,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/dependabot","target":"_blank"}}]},{"type":"list-item","text":"Storybook: https://storybook.js.org/","spans":[{"start":11,"end":36,"type":"hyperlink","data":{"link_type":"Web","url":"https://storybook.js.org/","target":"_blank"}}]},{"type":"list-item","text":"Depcheck: https://www.npmjs.com/package/depcheck","spans":[{"start":10,"end":48,"type":"hyperlink","data":{"link_type":"Web","url":"https://www.npmjs.com/package/depcheck","target":"_blank"}}]},{"type":"list-item","text":"Mono-repo: https://blog.logrocket.com/build-monorepo-next-js/","spans":[{"start":11,"end":61,"type":"hyperlink","data":{"link_type":"Web","url":"https://blog.logrocket.com/build-monorepo-next-js/","target":"_blank"}}]},{"type":"list-item","text":"Manteniendo grandes aplicaciones Next: https://www.smashingmagazine.com/2021/11/maintain-large-nextjs-application/","spans":[{"start":39,"end":114,"type":"hyperlink","data":{"link_type":"Web","url":"https://www.smashingmagazine.com/2021/11/maintain-large-nextjs-application/","target":"_blank"}}]}],"text":"Mejores pr√°cticas en aplicaci√≥n Next.js  Disclaimer: Esta pretende ser una serie de publicaciones que describan mi experiencia a trav√©s de este proceso. Esta serie se enfoca en lo acad√©mico y todo el c√≥digo est√° disponible en GitHub. No pretendo que sea un tutorial paso a paso. La mayor√≠a de los recursos utilizados ser√°n compartidos al final de cada publicaci√≥n.  Puedes visitar la versi√≥n m√°s reciente aqu√≠: https://notes.juanmurillo.co/es En mi art√≠culo anterior (Motivaci√≥n), implement√© una Prueba de Concepto muy b√°sica (Proof of Concept) y al final del art√≠culo, mencion√© un par de cosas que me gustar√≠a implementar. Quiero construir algo usando mi experiencia previa y en este art√≠culo me enfocar√© en las \"mejores pr√°cticas\". Entre m√°s programo, m√°s me familiarizo con Next y OpenAI. He revisado la documentaci√≥n y es impresionante la forma tan sencilla de agregar mejores pr√°cticas a tu proyecto. Esta semana me enfoqu√© en agregar estas funcionalidades a mi aplicaci√≥n. Ustedes se estar√°n preguntando, ¬øqu√© son y por qu√© son consideradas como \"mejores pr√°cticas\"? D√©jenme ponerlo en espa√±ol. ¬øQu√© son las \"mejores pr√°cticas\"? Seg√∫n el diccionario de Oxford, una buena pr√°ctica es: Procedimientos comerciales o profesionales que son aceptados o prescritos por ser los m√°s correctos o efectivos. Esta definici√≥n de \"mejores pr√°cticas\" puede ser ambigua en la industria del software y tambi√©n un poco relativa. Para este contexto en particular, que es una aplicaci√≥n web, vamos a reducir el alcance a pruebas, rutas, internacionalizaci√≥n (i18n), anal√≠tica, m√©tricas de desempe√±o, integraci√≥n continua y despliegue continuo (CI/CD), ambientes de desarrollo (desarrollo, prueba, producci√≥n), entre otros. Estas mejores pr√°cticas nos ayudan a mantener altos est√°ndares de calidad en nuestros productos o servicios digitales. Puede que haya muchas m√°s pr√°cticas consideradas como mejores. Por ejemplo, estandarizaci√≥n de componentes (creando o utilizando librer√≠as de componentes), procesos internos (comunicaci√≥n entre producto y dise√±o con el equipo de ingenier√≠a), manejo de registros (logs), pero estas ser√°n revisadas m√°s adelante. ¬øPor qu√© son consideradas como mejores pr√°cticas? En mi experiencia, pueden haber diversas razones para considerar estas pr√°cticas como las \"mejores\". Esto usualmente depende del tipo de producto o servicio, pero por ahora mencionar√© las que considero cr√≠ticas para el contexto actual: Pruebas: Mitigan los errores en producci√≥n, ayudan a los desarrolladores a identificar casos de borde (edge cases) y permiten que sean solucionados antes de ser consumidos por los usuarios. Adicionalmente, nos permiten mitigar las regresiones validando que el comportamiento existente se mantenga cuando estamos implementando nuevos cambios, agregando funcionalidades, o implementando feature flags. Routing: Un MVP (Minimum Viable Product - Producto M√≠nimo Viable) puede ser f√°cilmente una p√°gina. Sin embargo, a medida que se van agregando m√°s funcionalidades, empiezas a requerir diferentes p√°ginas o vistas para permitir que los usuarios naveguen por esas funcionalidades. Adicionalmente, muchas de las rutas ser√°n din√°micas y creadas con base en informaci√≥n del usuario. Internacionalizaci√≥n (i18n): Puede que le est√©s apuntando a una audiencia con un idioma particular, pero incluso si tu objetivo es LATAM, Brasil es un mercado que debes considerar. Por otro lado, si tu p√∫blico objetivo es Norteam√©rica, hay una cantidad considerable de hispanohablantes. Adem√°s, la internacionalizaci√≥n no se limita √∫nicamente al lenguaje, piensa en las divisas. Si vendes un producto o servicio, los precios deber√≠an estar alineados con la divisa de cada pa√≠s desde donde te visitan (üíµ, üí∂, üí¥). Anal√≠tica: No puedes mejorar lo que no puedes medir. ¬øC√≥mo sabes si tus cambios o nuevas funcionalidades est√°n siendo adoptadas? Los datos de anal√≠tica son cruciales para entender el flujo de tus usuarios y su experiencia usando tus productos. M√©tricas de desempe√±o: Igualmente, no puedes mejorar lo que no puedes medir. Es muy f√°cil usar tu producto en tu computadora personal, pero piensa en cu√°ntas personas lo usar√°n desde diferentes dispositivos, con redes limitadas (3G), entre otros. CI/CD: Debes saber si un nuevo Pull Request est√° afectando el comportamiento esperado. De lo contrario, si no lo hace, deber√≠a entregarse valor al cliente lo antes posible.(Existe algo llamado \"progressive rollout\" que tambi√©n debes considerar. B√°sicamente, es hacer p√∫blico un cambio o funcionalidad progresivamente para as√≠ mitigar errores). Ambientes de desarrollo: No queremos exponer la informaci√≥n de nuestros clientes. Adicionalmente, puede haber informaci√≥n sensible que debe ser manejada profesionalmente. ¬øC√≥mo implementarlas? Pruebas: Hay algo llamado la pir√°mide de pruebas.  https://learn.cypress.io/testing-foundations/the-testing-pyramid. Jest y React Testing Library para pruebas unitarias, Cypress/Playwright para pruebas de punto a punto (End-to-End, E2E). https://nextjs.org/docs/pages/building-your-application/optimizing/testing Routing: Para nuestro caso particular est√° integrado usando Next. https://nextjs.org/docs/pages/building-your-application/routing Internacionalizaci√≥n (i18n): Parece ser que hay i18n del lado del servidor (Internationalization Routing) y del lado del cliente. Existen muchas librer√≠as populares para manejar i18n del lado del cliente:¬†react-intl,¬†react-i18next,¬†lingui,¬†rosetta,¬†next-intl,¬†next-translate,¬†next-multilingual,¬†typesafe-i18n,¬†tolgee. https://nextjs.org/docs/pages/building-your-application/routing/internationalization. Del lado del servidor Next hace muy bien su trabajo. Sin embargo, a√∫n no he descubierto como se deber√≠an integrar ambas, estoy mucho m√°s familiarizado con i18n del lado del cliente. Anal√≠tica: Para nuestro caso particular, viene con Next. Google Analytics tambi√©n puede llegar a ser una opci√≥n. https://vercel.com/docs/analytics M√©tricas de desempe√±o: Para nuestro caso particular, viene con Next. https://vercel.com/docs/speed-insights CI/CD: GitHub Actions. Esto tambi√©n depende de d√≥nde est√° tu c√≥digo. Por ejemplo, otras alternativas pueden ser Bitbucket pipelines. Ambientes de desarrollo: Vercel maneja diferentes ambientes. https://vercel.com/docs/deployments/environments Conclusi√≥n En conclusi√≥n, no deber√≠amos limitarnos √∫nicamente a las mejores pr√°cticas mencionadas aqu√≠. Adem√°s, las mejores pr√°cticas no se limitan solo a la tecnolog√≠a, tambi√©n existen mejores pr√°cticas relacionadas con los procesos. En este contexto particular, hemos implementado las mejores pr√°cticas desde un punto de vista t√©cnico, y hemos aprovechado Next.js como framework, ya que muchas de estas pr√°cticas vienen casi por defecto. Sin embargo, es importante mencionar que all√≠ afuera existen muchas alternativas disponibles para cada una de las mejores pr√°cticas mencionadas aqu√≠. Simplemente, Next.js, como framework, facilita nuestra vida. Por favor, d√©jame saber qu√© otras pr√°cticas consideras que se me escaparon y deb√≠ mencionar aqu√≠. Trabajo hecho en la √∫ltima semana Actualizar la pol√≠tica de cache en los recursos de asistentes Actualizar los estilos. Tailwind es genial! Agregar analytics Agregar prettier Agregar linter Agregar husky Agregar lint-staged Configurar jest Agregar spinners Agregar soporte para i18n y un componente para cambiar de idioma Agregar redirect para locale por defecto (en - English - Ingl√©s) Agregar modo oscuro (dark mode) Lecciones Debugging next auth en producci√≥n. https://next-auth.js.org/configuration/options#debug La pol√≠tica de cache es fuerte por defecto en las aplicaciones Next. Pocketbase SDK no es obvio como manejar el cache con el SDK pero hay un \"hack\" o \"workaround\": https://github.com/pocketbase/pocketbase/discussions/2695:\nhttps://nextjs.org/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating\nhttps://nextjs.org/docs/app/building-your-application/caching Vercel AI API es demasiado buena para integrar AI en tu aplicaci√≥n. Adicional incluir el atributo `initialMessages` es maravilloso, pude eliminar l√≥gica innecesaria: https://github.com/jgmurillo10/notesapp/commit/b3337291b60af4c9b85706f7eebfc7a6fd668b03 GPT function calling te permite describir funciones y dejar que el modelo decida retornar un objeto JSON conteniendo los argumentos para esas funciones. En estas funciones puedes ejecutar tu propia l√≥gica o usar librer√≠as externas. Por ejemplo, obtener la temperatura en tiempo real dada una ubicaci√≥n. https://openai.com/blog/function-calling-and-other-api-updates El manejo de \"providers\" en una aplicaci√≥n de Next que utiliza el \"App directory\". Vercel viene con analytics y performance. Vercel provee una forma de medir el desempe√±o real de tu aplicaci√≥n en los computadores de tus usuarios. No en tu fancy üçé¬†computador con m√°s RAM de la necesaria. El modo oscuro (dark mode) es muy f√°cil de implementar con Tailwind. Recursos Implementar dark mode en Next 13 App directory (Implement dark mode in the Next 13 App directory): https://www.linkedin.com/pulse/implement-dark-mode-tailwindcss-nextjs13-app-5-simple-lucas-los-arcos/ Suppress hydration: https://legacy.reactjs.org/docs/dom-elements.html#suppresshydrationwarning Prettier VS TSLint/ESLint: https://prettier.io/docs/en/comparison GPT | Function calling: https://openai.com/blog/function-calling-and-other-api-updates GPT | Fine-tuning updates: https://openai.com/blog/gpt-3-5-turbo-fine-tuning-and-api-updates Web Analytics: https://vercel.com/docs/analytics Speed Insights: https://vercel.com/docs/speed-insights GitHub actions: https://github.com/features/actions Next cache: \nhttps://nextjs.org/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating\nhttps://nextjs.org/docs/app/building-your-application/caching E2E or Component tests using Cypress: https://docs.cypress.io/guides/core-concepts/testing-types TailwindUI: https://tailwindui.com/ Cosas que me mantienen humilde Darme cuenta de que los errores de next auth eran realmente porque faltaban variables de entorno en producci√≥n. (face-palm) Agregar soporte para jest pero crear solamente un dummy test en toda la aplicaci√≥n. Otras mejores pr√°cticas que vale la pena mencionar (Quiz√°s escriba acerca de ellas m√°s adelante) Optimizar Core Web Vitals: https://web.dev/i18n/es/vitals/ Optimizar el \"Bundle Size\" Implementaci√≥n y manejo de Feature flags Usar Dependabot para mantener los paquetes actualizados: https://github.com/dependabot Storybook: https://storybook.js.org/ Depcheck: https://www.npmjs.com/package/depcheck Mono-repo: https://blog.logrocket.com/build-monorepo-next-js/ Manteniendo grandes aplicaciones Next: https://www.smashingmagazine.com/2021/11/maintain-large-nextjs-application/"}}}}]}},"pageContext":{"uid":"next-gpt-pocket-base-2-best-practices","language":"es-co","intl":{"language":"es-co","languages":["en-us","es-co"],"messages":{"work":"Portafolio","projectsCTA":"Ver projectos privados","subscribeDescription":"Suscr√≠bete aqu√≠ para mantenerte al tanto en este y otros proyectos.","moreWork":"Ver m√°s proyectos","details":"Detalles","newsletter":"Si te gust√≥ este post agrega tu mail aqu√≠ abajo y dale 'Submit' para mantenerte al tanto.","readMore":"Leer m√°s","blog":"Blog"},"routed":true,"originalPath":"/blog/next-gpt-pocket-base-2-best-practices","redirect":false,"defaultLanguage":"en-us"}}},"staticQueryHashes":["3179776880"],"slicesMap":{}}